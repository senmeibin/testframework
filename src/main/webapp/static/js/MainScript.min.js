$M=function(){};$M.trim=function(a){if($M.isNull(a)){return""}if(typeof(a)=="object"){a.value=$.trim(a.value);return a.value}else{return $.trim(a)}};$M.getByteLength=function(e){var b=e.length;var c=b;for(var a=0;a<b;a++){var d=e.substring(a,a+1);if(d.match(/[ -~｡-ﾟ]/)==null){c++}}return c};$M.formatMessage=function(c,d){try{if(typeof(d)=="string"){c=c.replace("{0}",d)}else{if(typeof(d)=="object"){for(var b=0;b<d.length;b++){c=c.replace("{"+b+"}",d[b])}}else{c=c.replace("{0}",d)}}}catch(a){}return c};$M.formatUrl=function(a){if($M.isEmpty(a.value)){return}if($M.trim(a.value).indexOf("http://")==0){return}if($M.trim(a.value).indexOf("https://")==0){return}if(a.value.indexOf("http://")==-1||a.value.indexOf("http://")>0){a.value="http://"+a.value}};$M.disableEnterKey=function(a){if(a.keyCode!=Event.KEY_RETURN){return}if(navigator.userAgent.indexOf("Firefox")>-1){var c=a.target.type;var b=a.target.tagName}else{var c=a.srcElement.type;var b=a.srcElement.tagName}if(b!="INPUT"&&b!="TEXTAREA"){return}if(c!="submit"&&c!="textarea"&&c!="reset"&&c!="button"&&c!="image"){Event.stop(a);return false}};$M.brToEnter=function(a){return a.replace(/<[B|b][R|r] *\/??>/g,"\n")};$M.enterToBr=function(a){if($M.isNull(a)){return""}return a.replace(/\n/g,"<br />")};$M.getExtension=function(a){var b=a.lastIndexOf(".");if(b==-1){return""}return a.substring(b+1,a.length).toLowerCase()};$M.encodeValue=function(a){if(a.indexOf("%")!=-1){a=a.replaceAll("%","%25")}if(a.indexOf("&")!=-1){a=a.replaceAll("&","%26")}while(a.indexOf("+")!=-1){a=a.replace("+","%2B")}return a};$M.isNull=function(a){if(a==null||typeof a==undefined||a=="null"){return true}return false};$M.isEmpty=function(a){if(this.isNull(a)){return true}if(typeof a=="string"&&$.trim(a)==""){return true}return false};$M.isNotEmpty=function(a){return !$M.isEmpty(a)};$M.isNotNull=function(a){return !$M.isNull(a)};$M.formatNum=function(b,a,d){if(typeof a=="string"){d=a}if($M.isEmpty(d)){d=""}if(!/^(\+|-)?(\d+)(\.\d+)?$/.test(b)){return b}if(typeof b=="string"){b=parseFloat(b)}if(isNaN(b)){return b}b=String(b.toFixed(a));var c=/(-?\d+)(\d{3})/;while(c.test(b)){b=b.replace(c,"$1,$2")}return d+b};$M.formatCny=function(b,a){if($M.isEmpty(a)){a=window.amountPrecision}return $M.formatNum(b,a,"¥")};$M.formatJpy=function(b,a){if($M.isEmpty(a)){a=0}return $M.formatNum(b,a,"¥")};$M.formatDollar=function(b,a){if($M.isEmpty(a)){a=2}return $M.formatNum(b,a,"$")};$M.convertNum=function(a){if($M.isEmpty(a)){return a}a=String(a);var b=a.substring(0,1);if(b!="-"){if(isNaN(parseInt(b,10))){a=a.substring(1)}}return parseFloat(a.replaceAll(",",""))};$M.toFixed=function(b,a){if($M.isEmpty(b)){return 0}if($M.isEmpty(a)){a=2}b=b*100;return b.toFixed(a)/100};$M.loadCssFile=function(b,c){var d=(typeof(window.cssFileLoaded)=="undefined"||window.cssFileLoaded[b]=="undefined");if(d){var a=document.createElement("link");a.rel="stylesheet";a.href=c;a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);window.cssFileLoaded={};window.cssFileLoaded[b]=1}};$M.lockFormControl=function(b){try{$M._lockControl(b,true)}catch(a){}};$M.unLockFormControl=function(c,b){try{$M._lockControl(c,false,b)}catch(a){}};$M.lockWindow=function(d){try{$M._lockControl(d,true);var b=$M._getLockDocument(d).getElementsByTagName("iframe");for(var c=0;c<b.length;c++){if(b[c].contentWindow.document.body==null||b[c].contentWindow.document.body.innerHTML==""){Event.observe(b[c].contentWindow,"load",$M._lockFrame.bind(this,b[c].contentWindow))}else{$M._lockControl(b[c].contentWindow,true)}}}catch(a){}};$M._lockFrame=function(a){$M._lockControl(a,true)};$M.unLockWindow=function(f,d){try{$M._lockControl(f,false,d);var b=$M._getLockDocument(f).getElementsByTagName("iframe");for(var c=0;c<b.length;c++){$M._lockControl(b[c].contentWindow,false,d)}}catch(a){}};$M._lockControl=function(g,d,e){var f=["input","select","textarea"];for(var b=0;b<f.length;b++){var a=$M._getLockDocument(g).getElementsByTagName(f[b]);for(var c=0;c<a.length;c++){if(d){a[c].disabledFlag=a[c].disabled;if(a[c].disabled==false&&a[c].type!="hidden"){a[c].disabled=true}}else{if(a[c].disabled&&a[c].type!="hidden"){if(e){if(a[c].disabledFlag!=true){a[c].disabled=false}}else{a[c].disabled=false}a[c].disabledFlag=false}}}}};$M._getLockDocument=function(a){if(a.tagName!="DIV"&&a.tagName!="TABLE"){return a.document}else{return a}};$M.innerText=function(a,b){if($M.isFF()){a.textContent=b}else{a.innerText=b}};$M.getSplitChar=function(){if($M.isFF()){return unescape("%0A")}return"\n"};$M.getElementPosition=function(b){var a={x:0,y:0};do{if(b==null){break}a.x+=b.offsetLeft+$M.stringToInt(Element.getStyle(b,"borderLeftWidth"));a.y+=b.offsetTop+$M.stringToInt(Element.getStyle(b,"borderTopWidth"));b=b.offsetParent}while(b);return a};$M.isIE7=function(){return $M.isIEVersion(7)};$M.isIE8=function(){return $M.isIEVersion(8)};$M.isIE9=function(){return $M.isIEVersion(9)};$M.isIE10=function(){return $M.isIEVersion(10)};$M.isIEVersion=function(a){return($M.getIEVersion()==a)};$M.getIEVersion=function(){if(!$M.isIE()){return -1}var a=window.navigator.appVersion.split("MSIE");return parseFloat(a[1])};$M.isIE=function(){var a=window.navigator.userAgent.indexOf("MSIE")>=1;if(a){return true}return(!!window.ActiveXObject||"ActiveXObject" in window)};$M.isFF=function(c,d,e){var f=window.navigator.userAgent;if(f.indexOf("Firefox")==-1){return false}if(c==undefined&&d==undefined&&e==undefined){return true}if((c!=undefined||d!=undefined||e!=undefined)&&(c==undefined||d==undefined||e==undefined)){return false}if(typeof(c)!="number"||typeof(d)!="number"||typeof(e)!="number"){return false}var g=f.substr(f.indexOf("Firefox")+8,3);var a=g.split(".")[0];var b=g.split(".")[1];if(e==1){return(a==c&&b==d)}else{if(e==2){return((a<c)||(a==c&&b<=d))}else{if(e==3){return((a>c)||(a==c&&b>=d))}}}return false};$M.isFF3=function(){return window.navigator.userAgent.indexOf("Firefox/3")>=1};$M.isSafari=function(){return window.navigator.userAgent.indexOf("Safari")>=1};$M.isWeixinBrowser=function(){var a=window.navigator.userAgent.toLowerCase();if(a.match(/MicroMessenger/i)=="micromessenger"){return true}else{return false}};$M.isCompatModeStandard=function(){return(document.compatMode=="CSS1Compat")};$M.getScrollTop=function(a){a=a||document;if($M.isCompatModeStandard()){if($M.isSafari()){return a.body.scrollTop}else{return a.documentElement.scrollTop}}else{return a.body.scrollTop}};$M.getScrollLeft=function(a){a=a||document;if($M.isCompatModeStandard()){if($M.isSafari()){return a.body.scrollLeft}else{return a.documentElement.scrollLeft}}else{return a.body.scrollLeft}};$M.getScrollHeight=function(a){a=a||document;if($M.isCompatModeStandard()){if($M.isSafari()){return a.body.scrollHeight}else{return a.documentElement.scrollHeight}}else{return a.body.scrollHeight}};$M.getScrollWidth=function(a){a=a||document;if($M.isCompatModeStandard()){if($M.isSafari()){return a.body.scrollWidth}else{return a.documentElement.scrollWidth}}else{return a.body.scrollWidth}};$M.getClientHeight=function(a){a=a||document;if($M.isCompatModeStandard()){return a.documentElement.clientHeight}else{return a.body.clientHeight}};$M.getClientWidth=function(a){a=a||document;if($M.isCompatModeStandard()){return a.documentElement.clientWidth}else{return a.body.clientWidth}};$M.getClientTop=function(a){a=a||document;if($M.isCompatModeStandard()){return a.documentElement.clientTop}else{return a.body.clientTop}};$M.getClientLeft=function(a){a=a||document;if($M.isCompatModeStandard()){return a.documentElement.clientLeft}else{return a.body.clientLeft}};$M.goLogin=function(){window.location=window.contextPath+"/login"};$M.isAjaxFail=function(a){if(typeof a=="object"){return false}return $M.isSessionTimeout(a)||$M.isSystemError(a)||$M.is401Error(a)||$M.is404Error(a)||$M.is500Error(a)||$M.isAccessForbiddenError(a)||$M.isMaintenanceError(a)};$M.isSessionTimeout=function(a){if(a.indexOf("SESSION_TIME_OUT")>=0){SysCmn.CmnMsg.showMessage("本次会话已失效，请再次登录。",MSG_TYPE_ERROR,$M.goLogin);return true}return false};$M.isResponseEmpty=function(a){if($M.isEmpty(a)){SysCmn.CmnMsg.showMessage("页面长时间未操作，系统响应异常，请刷新页面后再执行相关操作。",MSG_TYPE_ERROR);return true}return false};$M.isSystemError=function(a){if(a.indexOf("SYSTEM_ERROR_FLAG")>=0){SysCmn.CmnMsg.showMessage("发生系统错误，请与系统管理员联系。",MSG_TYPE_ERROR);return true}return false};$M.is401Error=function(a){if(a.indexOf("SYSTEM_401_FLAG")>=0){SysCmn.CmnMsg.showMessage("401-没有访问权限或操作权限。",MSG_TYPE_ERROR);return true}return false};$M.is404Error=function(a){if(a.indexOf("SYSTEM_404_FLAG")>=0){SysCmn.CmnMsg.showMessage("404-您所访问的页面不存在。",MSG_TYPE_ERROR);return true}return false};$M.is500Error=function(a){if(a.indexOf("SYSTEM_500_FLAG")>=0){SysCmn.CmnMsg.showMessage("500-发生系统错误，请与系统管理员联系。",MSG_TYPE_ERROR);return true}return false};$M.isAccessForbiddenError=function(a){if(a.indexOf("SYSTEM_ACCESS_FORBIDDEN_FLAG")>=0){SysCmn.CmnMsg.showMessage("应用模块的访问权限暂未开通，请与系统管理员联系。",MSG_TYPE_ERROR);return true}return false};$M.isMaintenanceError=function(a){if(a.indexOf("SYSTEM_MAINTENANCE_FLAG")>=0){SysCmn.CmnMsg.showMessage("应用模块系统维护中，请稍后重试。",MSG_TYPE_ERROR);return true}return false};$M.stringToInt=function(a){var b=parseInt(a,10);b=isNaN(b)?0:b;return b};$M.getElementPos=function(a){var b=0;var c=0;while(a.offsetParent){b+=a.offsetLeft+$M.stringToInt(Element.getStyle(a,"borderLeftWidth"));c+=a.offsetTop+$M.stringToInt(Element.getStyle(a,"borderTopWidth"));a=a.offsetParent}b+=a.offsetLeft+$M.stringToInt(Element.getStyle(a,"borderLeftWidth"));c+=a.offsetTop+$M.stringToInt(Element.getStyle(a,"borderTopWidth"));return{x:b,y:c}};$M.getMousePos=function(a){var b=0;var c=0;if(a.pageX||a.pageY){b=a.pageX;c=a.pageY}else{b=a.clientX+$M.getScrollLeft()-$M.getClientLeft();c=a.clientY+$M.getScrollTop()-$M.getClientTop()}return{x:b,y:c}};$M.swapElement=function(d,a){var b=d.nextSibling;var c=d.parentNode;a.parentNode.replaceChild(d,a);if(b!=null){c.insertBefore(a,b)}else{c.appendChild(a)}};$M.getMouseOffset=function(a,c){var c=c||window.event;var b=$M.getElementPos(a);var d=$M.getMousePos(c);return{x:d.x-b.x,y:d.y-b.y}};$M.popupWindowName="POPUP_WINDOW_NAME";$M.openWindow=function(e,b,a,d){e+="&refreshDate="+new Date().getTime();if(window.name!=null&&typeof typeof(window.name)!="undefined"&&window.name.indexOf(b)==0){b=window.name;return window.open(e,b,a,d)}else{if(window.name!=null&&typeof(window.name)!="undefined"&&window.name.indexOf(b)==4){b=window.name.substr(4);var c=window.open(e,b,a,d);if(c!=null){c.focus()}return c}else{b=(b+"_"+new Date().getTime());var c=window.open(e,b,a,d);window.name="SUB_"+b;return c}}};$M.addLeft=function(e,c,a){e=$M.trim(e);var d="";for(var b=0;b<c-e.length;b++){d=d+a}d=d+e;return d};$M.getStringHtmlDimensions=function(c){if(document.body==null){alert("画面加载中，API利用不可。");return 0}var a="string_html_width_span_id_0123456789";var d=$E(a);if(d==null){var d=document.createElement("SPAN");$(d).css("white-space","nowrap");$(d).hide();$(d).css("position","absolute");$(d).css("top","-100px");d.id=a;d.innerHTML=c;document.body.appendChild(d)}else{d.innerHTML=c}var b=Element.getDimensions(d);d.innerHTML="";return b};$M.bindPromptEvent=function(){$(".prompt-open label").append(' <span class="prompt-off">（点击查看详细内容）</span><span class="prompt-on">（点击隐藏详细内容）</span>').after('<em class="fa fa-sort-down"></em><em class="fa fa-sort-up"></em>');var b=$.cookie("promptIds");if(!$M.isEmpty(b)){var c=b.split(",");for(var a=0;a<c.length;a++){if($M.isEmpty(c[a])){continue}$("#"+c[a]).addClass("prompt-close")}}$(".prompt-open label").click(function(){$(this).parent().toggleClass("prompt-close");var d=$(this).parent().attr("id");var f=$.cookie("promptIds");if(!$M.isEmpty(f)){f=f+","+d}else{f=d}var e=$(this).parent().hasClass("prompt-close");if(e){$.cookie("promptIds",f)}else{f=f.replaceAll(","+d,"");f=f.replaceAll(d,"");$.cookie("promptIds",f)}})};$M.getStringHtmlWidth=function(a){if(document.body==null){alert("画面加载中，API利用不可。");return 0}return $M.getStringHtmlDimensions(a).width};$M.getEvent=function(){var a=null;if(typeof event=="undefined"){if(arguments.callee.caller!=null){a=arguments.callee.caller.arguments[0]}}else{a=window.event}return a};Object.deepClone=function(d){if(typeof(d)!="object"){return d}var a=new d.constructor();for(var b in d){if(a[b]!=d[b]){if(typeof(d[b])=="object"){a[b]=Object.deepClone(d[b])}else{a[b]=d[b]}}}a.toString=d.toString;a.valueOf=d.valueOf;return a};Array.prototype.put=function(b,c){try{b="_"+b.toString();this[b]=c}catch(a){return false}return true};Array.prototype.get=function(b){var c=null;try{b="_"+b.toString();if(this[b]){c=this[b]}}catch(a){}return c};var ID_CARD_POWERS=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"];var ID_CARD_PARITY=["1","0","X","9","8","7","6","5","4","3","2"];$M.validIDCard=function(b){b=b.toUpperCase();if($M.isEmpty(b)){return -1}if(b.length!=18){return -1}var d=b.substr(0,17);var e=b.substr(17);var f=0;var g={};g.birthday=b.substr(6,4)+"/"+b.substr(10,2)+"/"+b.substr(12,2);for(var a=0;a<17;a++){if(d.charAt(a)<"0"||d.charAt(a)>"9"){return -1}else{f+=parseInt(d.charAt(a),10)*parseInt(ID_CARD_POWERS[a],10);if(a==16&&parseInt(d.charAt(a),10)%2==0){g.gender="02"}else{g.gender="01"}}}var c=parseInt(f,10)%11;if(ID_CARD_PARITY[c]==e){return g}return -1};(function(a){a(document).ready(function(){try{a(".tooltips").tooltip();a(".popovers").popover({html:true})}catch(b){}})})(jQuery);SysAjax=function(){};SysAjax.prototype.send=function(f,c,a,b,d){if(typeof d!="function"){d=this.onFailure}var e=new Date().getTime();f=(f.indexOf("?")==-1)?(f+"?ajaxTime="+e):(f+"&ajaxTime="+e);return new Ajax.Request(f,{method:c,parameters:b,onComplete:a,onFailure:d})};SysAjax.prototype.sendPOST=function(d,a,b,c){this.send(d,"post",a,b,c)};SysAjax.prototype.sendGET=function(d,a,b,c){return this.send(d,"get",a,b,c)};SysAjax.prototype.onFailure=function(){SysCmn.CmnMsg.showMessage("发生Ajax通信错误，请与系统管理员联系。",MSG_TYPE_ERROR)};AjaxIns=new SysAjax();window.DATE_FORMAT="yyyy/MM/dd";window.DATE_FORMAT_YM="yyyy/MM";window.NS_DATE="yyyyMMdd";window.DATE_TIME="yyyy/MM/dd HH:mm:ss";Date.prototype.addDay=function(a){return new Date(this.getTime()+a*24*60*60*1000)};Date.prototype.addDate=function(a,b){switch(a){case"YEAR":this.setFullYear(this.getFullYear()+b);break;case"MONTH":this.setMonth(this.getMonth()+b);break;case"WEEK":this.setDate(this.getDate()+b*7);break;case"DAY":this.setDate(this.getDate()+b);break;case"HOUR":this.setHour(this.getHour()+b);break;case"MINUTE":this.setMinutes(this.getMinutes()+b);break;case"SECOND":this.setSeconds(this.getSeconds()+b);break}return this};Date.prototype.getWeekName=function(){var a=this.getDay();switch(a){case 0:return"星期日";break;case 1:return"星期一";break;case 2:return"星期二";break;case 3:return"星期三";break;case 4:return"星期四";break;case 5:return"星期五";break;case 6:return"星期六";break}};Date.prototype.format=function(b){var a=this;var c=function(f,e){if(!e){e=2}f=String(f);for(var d=0,g="";d<(e-f.length);d++){g+="0"}return g+f};return b.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|M{1,4}|yy(?:yy)?|([hHmstT])\1?|[lLZ])\b/g,function(d){switch(d){case"d":return a.getDate();case"dd":return c(a.getDate());case"ddd":return["Sun","Mon","Tue","Wed","Thr","Fri","Sat"][a.getDay()];case"dddd":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()];case"M":return a.getMonth()+1;case"MM":return c(a.getMonth()+1);case"MMM":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()];case"MMMM":return["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()];case"yy":return String(a.getFullYear()).substr(2);case"yyyy":return a.getFullYear();case"h":return a.getHours()%12||12;case"hh":return c(a.getHours()%12||12);case"H":return a.getHours();case"HH":return c(a.getHours());case"m":return a.getMinutes();case"mm":return c(a.getMinutes());case"s":return a.getSeconds();case"ss":return c(a.getSeconds());case"l":return a.getMilliseconds();case"ll":return c(a.getMilliseconds());case"tt":return a.getHours()<12?"am":"pm";case"TT":return a.getHours()<12?"AM":"PM"}})};Date.prototype.formatYM=function(){return this.format(DATE_FORMAT_YM)};Date.prototype.formatYMD=function(){return this.format(DATE_FORMAT)};Date.prototype.formatYMDHMS=function(){return this.format(DATE_TIME)};Date.prototype.formatString=function(d,b){var e=(this.getFullYear()).toString();var c=(this.getMonth()+1).toString();var a=(this.getDate()).toString();if(b==true){if(c.length<2){c="0"+c}if(a.length<2){a="0"+a}}return e+d+c+d+a};Date.prototype.diff=function(a){return(this.getTime()-a.getTime())/(24*60*60*1000)};String.prototype.formatMessage=function(d){try{var c=this;if(typeof(d)=="string"){c=c.replace("{0}",d)}else{if(typeof(d)=="object"){for(var b=0;b<d.length;b++){c=c.replace("{"+b+"}",d[b])}}else{c=c.replace("{0}",d)}}}catch(a){}return c};String.prototype.htmlToString=function(){return this.replace(/<(.*)>/,"&lt;$1&gt;")};String.prototype.replaceAll=function(b,a){return this.replace(new RegExp(b,"gm"),a)};String.prototype.formatY=function(){if(this.isNullDate()){return""}if(this.length>=10){return this.substr(0,4)}return""};String.prototype.formatM=function(){if(this.isNullDate()){return""}if(this.length>=10){return this.substr(5,2)}return""};String.prototype.formatD=function(){if(this.isNullDate()){return""}if(this.length>=10){return this.substr(8,2)}return""};String.prototype.formatYM=function(){if(this.isNullDate()){return""}if(this.length>=7){return this.substr(0,7)}return""};String.prototype.formatMD=function(){if(this.isNullDate()){return""}if(this.length>=10){return this.substr(5,5)}return""};String.prototype.formatYMD=function(){if(this.isNullDate()){return""}if(this.length>=10){return this.substr(0,10)}return""};String.prototype.formatYMDHM=function(){if(this.isNullDate()){return""}if(this.length>=16){return this.substr(0,16)}return""};String.prototype.formatYMDHMS=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(0,19)}return""};String.prototype.formatH=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(11,2)}return""};String.prototype.formatMin=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(14,2)}return""};String.prototype.formatS=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(17,2)}return""};String.prototype.formatHM=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(11,5)}return""};String.prototype.formatMS=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(14,5)}return""};String.prototype.formatHMS=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(11,8)}return""};String.prototype.formatMDHM=function(){if(this.isNullDate()){return""}if(this.length>=19){return this.substr(5,11)}return""};String.prototype.isNullDate=function(){if(this.indexOf("1753-01-01")==0){return true}if(this.indexOf("1900-01-01")==0){return true}if(this.indexOf("1753/01/01")==0){return true}if(this.indexOf("1900/01/01")==0){return true}return false};String.prototype.escapeHTMLKeepLineBreak=function(){return this.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};String.prototype.splitByEnter=function(){var a=this.split($M.getSplitChar());for(var b=0;b<a.length;b++){a[b]=$.trim(a[b])}return a};window.SERVER_TIMEZONE=8;window.CLIENT_TIMEZONE=new Date().getTimezoneOffset()/60*-1;JsonUtility=function(){};JsonUtility.Parse=function(jsonString){if(typeof jsonString=="object"){return jsonString}try{if($M.isNull(jsonString)||$.trim(jsonString)==""){return{}}var json=eval("("+jsonString+")");if(json==jsonString){SysCmn.CmnMsg.showMessage("JSON字符串错误。",MSG_TYPE_ERROR)}return json}catch(e){SysCmn.CmnMsg.showMessage("JSON字符串错误["+e+"]。",MSG_TYPE_ERROR);return jsonString}};JsonUtility.ToJSON=function(c){var d=[];var b="";var e="";if(Object.prototype.toString.apply(c)==="[object Array]"){for(var a=0;a<c.length;a++){d.push(JsonUtility.ToJSON(c[a]))}b="["+d.join(",")+"]"}else{if(Object.prototype.toString.apply(c)==="[object Date]"){b="\\/Date("+c.getTime()+")\\/"}else{if(Object.prototype.toString.apply(c)==="[object RegExp]"||Object.prototype.toString.apply(c)==="[object Function]"){b=c.toString()}else{if(Object.prototype.toString.apply(c)==="[object Object]"){if(c==null){return""}for(var a in c){if(typeof(c[a])=="string"){var f=c[a];f=f.replaceAll("\\\\","\\\\");f=f.replaceAll('"','\\"');f=$M.encodeValue(f);e='"'+f+'"'}else{if(typeof(c[a])==="object"){e=JsonUtility.ToJSON(c[a])}else{e='"'+c[a]+'"'}}if(typeof e=="string"){if(e.indexOf("Date(")>0){SysCmn.CmnMsg.showMessage("JsonUtility.ToJSON.T = "+e,MSG_TYPE_INFO);e="\\"+e+"\\"}}d.push('"'+a+'":'+e)}b="{"+d.join(",")+"}"}else{if(Object.prototype.toString.apply(c)==="[object String]"){b='"'+c+'"'}else{if(c==null){b='""'}else{b='"'+c+'"'}}}}}}return b};SysCmn.CtrlUtil=function(){};SysCmn.CtrlUtil.SetPopupPosition=function(f,k){f=$($E(f));var d=$M.getClientHeight();var l=$M.getClientWidth();var a=parseInt(f.height(),10);var b=parseInt(f.width(),10);if(d<a){d=a}if(l<b){l=b}var j=$M.getScrollTop();var i=$M.getScrollLeft();if(k!=null){var g=null;try{if(k=="center"){f.css("top",((d-a)/2+j))}else{if(k=="top"){f.css("top",(j+50))}else{if(k=="firstTop"){f.css("top",j)}else{if(typeof(k.id)!="undefined"){g=$M.getElementPosition(k)}else{g=$M.getElementPosition(Event.element(k))}if(g.y-j>(a+20)){f.css("top",(g.y-(a+20)))}else{f.css("top",j)}}}}}catch(c){f.css("top",j)}}else{f.css("top",j)}f.css("left",((l-b)/2+i))};SysCmn.DragDrop=function(){};SysCmn.DragDrop.Start=function(d,c){if(!Event.isLeftClick(c)){return}var h=$E(d);if(h.style.width=="100%"||h.style.height=="100%"){return}var e=!!h.style.left?h.style.left:0;var j=!!h.style.top?h.style.top:0;var k=parseInt(e,10);var l=parseInt(j,10);var a=Event.pointerX(c)-k;var b=Event.pointerY(c)-l;Event.observe(document,"mousemove",f);Event.observe(document,"mouseup",g);Event.observe(document,"selectstart",i);Event.stop(c);function f(m){$(h).css("left",Event.pointerX(m)-a);$(h).css("top",Event.pointerY(m)-b);i();Event.stop(m)}function g(m){Event.stopObserving(document,"mousemove",f);Event.stopObserving(document,"mouseup",g);Event.stopObserving(document,"selectstart",i);Event.stop(m)}function i(){return false}};SysCmn.EstopLayer=function(){};SysCmn.EstopLayer.prototype.tagTypeList=["A","INPUT","SELECT","TEXTAREA","IFRAME"];SysCmn.EstopLayer.prototype.filters=[];SysCmn.EstopLayer.prototype.userCtrls=[];SysCmn.EstopLayer.prototype.opacity=40;SysCmn.EstopLayer.prototype.zIndex=1000;SysCmn.EstopLayer.prototype.backgroundColor="#000000";SysCmn.EstopLayer.prototype.appendCompleteFlag=false;SysCmn.EstopLayer.prototype.DHTMLList=[];SysCmn.EstopLayer.prototype.show=function(a){$(document.body).css("overflow-x","hidden");this.setTabIndex(document.body,SysCmn.EstopLayer.tagTypeList,-1);this.setTabIndex(a,SysCmn.EstopLayer.tagTypeList,0);if(this.userCtrls.length>0&&this.userCtrls[this.userCtrls.length-1].id==$E(a).id){return}var c=document.createElement("div");var d=$(c);c.id=a.id+"ctlEstopLayerDiv_1q2w3e4r5t6y7u8i9o0p1a2s3d4f5g6h7j8k9l0";d.css("left",0);d.css("top",0);d.css("display","block");d.css("position","absolute");d.css("border","none");d.css("background-color",this.backgroundColor);d.css("filter","alpha(opacity='"+this.opacity+"')");d.css("opacity",this.opacity/100);d.css("visibility","visible");this.appendChildToBody(c);var e=$(a);var b=e.data("zindex");if($M.isEmpty(b)){e.css("z-index",this.zIndex+1);d.css("z-index",this.zIndex)}else{e.css("z-index",b+1);d.css("z-index",b)}this.zIndex=this.zIndex+2;Event.observe(window,"resize",this.reSize.bind(this));this.filters.push(c);this.userCtrls.push($E(a));this.reSize()};SysCmn.EstopLayer.prototype.appendChildToBody=function(a){if($M.isIE()&&document.readyState!="complete"){window.setTimeout(function(){SysCmn.EstopLayer.appendChildToBody.bind(a)},100);return}document.body.appendChild(a);this.appendCompleteFlag=true};SysCmn.EstopLayer.prototype.hide=function(a){if(a==null||$E(a)==null){alert("SysCmn.EstopLayer.prototype.hide()方法的参数不足。");return}this.rollbackTabIndex();if(this.userCtrls.length==0||this.userCtrls[this.userCtrls.length-1].id!=$E(a).id){return}$(this.filters[this.filters.length-1]).css("visibility","hidden");this.elementRemoveFromBody(this.filters[this.filters.length-1]);if(this.filters.length>1){this.setTabIndex(document.body,SysCmn.EstopLayer.tagTypeList,-1);this.setTabIndex(this.userCtrls[this.userCtrls.length-2],SysCmn.EstopLayer.tagTypeList,0)}this.filters.pop();this.userCtrls.pop();if(this.userCtrls.length==0){$(document.body).css("overflow-x","auto")}this.reSize();this.zIndex=this.zIndex-2};SysCmn.EstopLayer.prototype.elementRemoveFromBody=function(b){try{if(!this.appendCompleteFlag){window.setTimeout(function(){SysCmn.EstopLayer.elementRemoveFromBody.bind(b)},100);return}Element.remove(b)}catch(a){}};SysCmn.EstopLayer.prototype.reSize=function(){var d=$M.getScrollHeight();var a=$M.getClientHeight();var e=$M.getScrollWidth();var b=$M.getClientWidth();for(var c=0;c<this.filters.length;c++){if(d>a){$(this.filters[c]).css("height",d)}else{$(this.filters[c]).css("height",a)}if(e>b){$(this.filters[c]).css("width",e)}else{$(this.filters[c]).css("width",b)}}};SysCmn.EstopLayer.prototype.setTabIndex=function(b,h,g){var a=[];for(var c=0;c<h.length;c++){var f=$E(b).getElementsByTagName(h[c]);a.push(f)}for(var c=0;c<a.length;c++){for(var e=0;e<a[c].length;e++){var d=a[c][e];if(d.storeTabIndex=="undefined"){d.storeTabIndex=d.tabIndex}d.tabIndex=g;if(g==-1&&$M.isIE()&&d.tagName=="INPUT"&&(d.type=="submit"||d.type=="radio")&&!d.disabled){d.disabled=true;d.toggleDisabled=true}if(g==0){if($M.isIE()&&d.tagName=="INPUT"&&(d.type=="submit"||d.type=="radio")&&d.toggleDisabled!="undefined"&&d.toggleDisabled){d.disabled=false;d.toggleDisabled=false}}this.DHTMLList.push(d)}}};SysCmn.EstopLayer.prototype.rollbackTabIndex=function(){for(var a=0;a<this.DHTMLList.length;a++){var b=this.DHTMLList[a];if(b.storeTabIndex!="undefined"){b.tabIndex=b.storeTabIndex}if($M.isIE()&&b.tagName=="INPUT"&&(b.type=="submit"||b.type=="radio")&&b.toggleDisabled!="undefined"&&b.toggleDisabled){b.disabled=false;b.toggleDisabled=false}}this.DHTMLList.clear()};SysCmn.EstopLayer=new SysCmn.EstopLayer();var iscrollGlobalOptions={mouseWheel:true,scrollbars:true,disablePointer:true,interactiveScrollbars:true,disableMouse:true};IScrollUtility=function(){};IScrollUtility.getGlobalOptions=function(){return iscrollGlobalOptions};